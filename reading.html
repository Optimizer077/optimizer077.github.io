<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Paper Reading â€“ Ali Haider</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --clr-accent:#007acc;
      --clr-primary:#1f2937;
      --clr-text:#374151;
      --clr-bg:#ffffff;
      --clr-bg-alt:#f9f9f9;
      --clr-border:#e5e7eb;
      --fs-sm:0.875rem;
      --fs-lg:1.125rem;
      --fs-xl:1.45rem;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;max-width:860px;margin:auto;padding:2.5rem 1rem 4rem;line-height:1.65;color:var(--clr-text);}
    h1{font-size:2rem;font-weight:600;color:var(--clr-primary);margin-bottom:.5rem;}
    h2{font-size:var(--fs-xl);font-weight:600;color:var(--clr-primary);margin-bottom:1rem;border-bottom:2px solid var(--clr-accent);padding-bottom:.4rem;}
    a{color:var(--clr-accent);text-decoration:none;}a:hover{text-decoration:underline;}
    ul{padding-left:1.25rem;margin-top:.6rem;}
    li{margin-bottom:.55rem;font-size:var(--fs-lg);}
    section{background:var(--clr-bg-alt);border:1px solid var(--clr-border);border-radius:8px;padding:1.6rem 1.4rem;margin-bottom:2rem;}
    nav.top-nav{position:absolute;top:1.5rem;right:2rem;display:flex;gap:.55rem;}
    nav.top-nav a{font-size:var(--fs-sm);color:var(--clr-accent);padding:.35rem .85rem;border:1px solid var(--clr-accent);border-radius:6px;background:var(--clr-bg);transition:background .2s,color .2s;text-decoration:none;}
    nav.top-nav a:hover{background:var(--clr-accent);color:var(--clr-bg);}  
  </style>
</head>
<body>

  <nav class="top-nav">
    <a href="index.html">Home</a>
    <a href="seminar.html">Seminar</a>
  </nav>

  <h1>ðŸ“š Paper Reading List</h1>
  <p style="color:#6b7280;font-style:italic;margin-bottom:1.5rem;">Curated reading collections for group study</p>

  <!-- ===== Reasoning Models Section ===== -->
  <section id="reasoning">
    <h2>Reasoning Models</h2>
    <ul id="reasoning-list"><!-- filled by JS --></ul>
  </section>

  <!-- ===== Implicit Neural Representations Section ===== -->
  <section id="inr">
    <h2>Implicit Neural Representations (INR)</h2>
    <ul id="inr-list"><!-- filled by JS --></ul>
  </section>

  <script>
    /**
     * Very small CSV parser (RFCâ€‘4180 style, quoted fields with escapes).
     * Returns an array of rows, each being an array of fields.
     */
    function parseCSV(text){
      const rows=[], row=[]; let field='';
      let i=0, inQuotes=false;
      while(i<text.length){
        const c=text[i];
        if(inQuotes){
          if(c==='"' && text[i+1]==='"'){ field+='"'; i+=2; continue; }
          if(c==='"'){ inQuotes=false; i++; continue; }
          field+=c; i++; continue;
        }
        if(c==='"'){ inQuotes=true; i++; continue; }
        if(c===','){ row.push(field); field=''; i++; continue; }
        if(c==='\n' || c==='\r'){
          if(c==='\r' && text[i+1]==='\n') i++; // CRLF
          row.push(field); rows.push(row.slice()); row.length=0; field=''; i++; continue; }
        field+=c; i++; }
      // last field
      if(field!==''||row.length){ row.push(field); rows.push(row); }
      return rows;
    }

    /** Helper: pick column index by priority names */
    function findColumn(header, prefer){
      prefer=Array.isArray(prefer)?prefer:[prefer];
      // 1) exact match
      for(const name of prefer){
        const idx=header.indexOf(name.toLowerCase());
        if(idx!==-1) return idx;
      }
      // 2) first header containing any keyword fragment
      for(const name of prefer){
        const idx=header.findIndex(h=>h.includes(name.toLowerCase()));
        if(idx!==-1) return idx;
      }
      return -1;
    }

    /** Convert Zotero-style Author string to "Surname et al." */
    function formatAuthors(authorField){
      if(!authorField) return 'Unknown';
      // split by semicolon (Zotero)
      const first=authorField.split(';')[0].trim();
      if(!first) return 'Unknown';
      let surname='';
      if(first.includes(',')) surname=first.split(',')[0].trim();
      else surname=first.split(' ').slice(-1)[0];
      return surname+" et al.";
    }

    /** Insert <li> into a UL */
    function pushPaper(ul,url,title,authors,year){
      url=url?.trim(); title=title?.trim();
      if(!url || !title) return;
      const li=document.createElement('li');
      const a=document.createElement('a');
      a.href=url; a.target='_blank'; a.rel='noopener noreferrer'; a.textContent=title;
      const span=document.createElement('span');
      span.style.color='#6b7280';
      const meta=[authors||'Unknown', year||''].filter(Boolean).join(', ');
      span.innerHTML=` (${meta})`;
      li.appendChild(a); li.appendChild(span); ul.appendChild(li);
    }

    /** Load papers from CSV (preferred) or TXT fallback */
    async function loadPapers(baseName,listId){
      const ul=document.getElementById(listId);
      if(!ul) return;

      const csvUrl=`${baseName}.csv`;
      try{
        const res=await fetch(csvUrl);
        if(res.ok){
          const text=await res.text();
          const rows=parseCSV(text.trim());
          if(rows.length){
            const header=rows[0].map(h=>h.trim().toLowerCase());
            const idxUrl    = findColumn(header,['url','link']);
            const idxTitle  = findColumn(header,'title');
            const idxAuthor = findColumn(header,['author','authors']);
            const idxYear   = findColumn(header,['publication year','year']);
            rows.slice(1).forEach(r=>{
              pushPaper(ul,r[idxUrl],r[idxTitle],formatAuthors(r[idxAuthor]),r[idxYear]);
            });
            return; // success with CSV
          }
        }
      }catch(e){ console.warn(`Failed CSV ${csvUrl}`,e); }

      // TXT fallback "URL | Title | Authors | Year"
      try{
        const res=await fetch(`${baseName}.txt`);
        if(!res.ok) return;
        const lines=(await res.text()).trim().split(/\r?\n/);
        lines.forEach(line=>{
          if(!line || line.startsWith('#')) return;
          const [url,title,authors,year]=line.split('|').map(s=>s?.trim());
          pushPaper(ul,url,title,authors,year);
        });
      }catch(e){ console.warn(`Fallback TXT failed`,e); }
    }

    loadPapers('reasoning','reasoning-list');
    loadPapers('inr','inr-list');
  </script>

</body>
</html>
